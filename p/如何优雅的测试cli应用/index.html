<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« è®¨è®ºå¦‚ä½•å»åšhello worldçš„å•å…ƒæµ‹è¯•ï¼Œå½“æ—¶æƒ³åˆ°çš„ä¸€ä¸ªæ–¹æ³•æ˜¯å°†hello worldæŠ½è±¡æˆ1ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›hello worldå­—ç¬¦ä¸²ï¼Œç„¶åæµ‹è¯•è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å°±å¥½äº†ï¼Œä»£ç å¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºã€‚\n"><title>å¦‚ä½•ä¼˜é›…çš„æµ‹è¯•cliåº”ç”¨</title><link rel=canonical href=zh.ethanhan.cc/p/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E6%B5%8B%E8%AF%95cli%E5%BA%94%E7%94%A8/><link rel=stylesheet href=zh.ethanhan.cc/scss/style.min.833d6eed45de56f48306bf57268d5b8cdfc8a60e8e7bdc99810464fcd033f7c6.css><meta property='og:title' content="å¦‚ä½•ä¼˜é›…çš„æµ‹è¯•cliåº”ç”¨"><meta property='og:description' content="ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« è®¨è®ºå¦‚ä½•å»åšhello worldçš„å•å…ƒæµ‹è¯•ï¼Œå½“æ—¶æƒ³åˆ°çš„ä¸€ä¸ªæ–¹æ³•æ˜¯å°†hello worldæŠ½è±¡æˆ1ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›hello worldå­—ç¬¦ä¸²ï¼Œç„¶åæµ‹è¯•è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å°±å¥½äº†ï¼Œä»£ç å¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºã€‚\n"><meta property='og:url' content='zh.ethanhan.cc/p/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E6%B5%8B%E8%AF%95cli%E5%BA%94%E7%94%A8/'><meta property='og:site_name' content='ä¹™é†‡çš„åšå®¢'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2024-08-02T17:33:25+08:00'><meta property='article:modified_time' content='2024-08-02T17:33:25+08:00'><meta name=twitter:title content="å¦‚ä½•ä¼˜é›…çš„æµ‹è¯•cliåº”ç”¨"><meta name=twitter:description content="ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« è®¨è®ºå¦‚ä½•å»åšhello worldçš„å•å…ƒæµ‹è¯•ï¼Œå½“æ—¶æƒ³åˆ°çš„ä¸€ä¸ªæ–¹æ³•æ˜¯å°†hello worldæŠ½è±¡æˆ1ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›hello worldå­—ç¬¦ä¸²ï¼Œç„¶åæµ‹è¯•è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å°±å¥½äº†ï¼Œä»£ç å¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºã€‚\n"><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/zh.ethanhan.cc/><img src=zh.ethanhan.cc/img/avatar_hu_c3223959809ae462.jpg width=300 height=169 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ˜Š</span></figure><div class=site-meta><h1 class=site-name><a href=/zh.ethanhan.cc>ä¹™é†‡çš„åšå®¢</a></h1><h2 class=site-description>èµ°å‡ºèˆ’é€‚åŒº</h2></div></header><ol class=menu-social><li><a href=https://github.com/easonhan007/blogzh2025 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=zh.ethanhan.cc/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=zh.ethanhan.cc/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=zh.ethanhan.cc/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=zh.ethanhan.cc/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹æƒ…é“¾æ¥</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ>æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ</a></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=zh.ethanhan.cc/p/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E6%B5%8B%E8%AF%95cli%E5%BA%94%E7%94%A8/>å¦‚ä½•ä¼˜é›…çš„æµ‹è¯•cliåº”ç”¨</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2024-08-02T17:33:25+08:00>Aug 02, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 5 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p>ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« è®¨è®ºå¦‚ä½•å»åšhello worldçš„å•å…ƒæµ‹è¯•ï¼Œå½“æ—¶æƒ³åˆ°çš„ä¸€ä¸ªæ–¹æ³•æ˜¯å°†hello worldæŠ½è±¡æˆ1ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›hello worldå­—ç¬¦ä¸²ï¼Œç„¶åæµ‹è¯•è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å°±å¥½äº†ï¼Œä»£ç å¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>def hello_world():
</span></span><span class=line><span class=cl>    return &#34;hello world&#34;
</span></span></code></pre></td></tr></table></div></div><p>å‰å‡ å¤©çœ‹åˆ°rust cliæ‰‹å†Œé‡Œçš„ä¸€ä¸ªåšæ³•ï¼Œæ¯”ä¸Šé¢çš„æ–¹æ¡ˆæ›´åŠ çš„åˆç†ï¼Œè¿™é‡Œå¿ä¸ä½åˆ†äº«ä¸€ä¸‹ã€‚</p><h2 id=æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ>æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ</h2><p>æµ‹è¯•åŠŸèƒ½æœ‰ä¸¤ç§äº’è¡¥çš„æ–¹æ³•:æµ‹è¯•æ„å»ºå®Œæ•´åº”ç”¨ç¨‹åºçš„å°å•å…ƒ,è¿™äº›ç§°ä¸º"å•å…ƒæµ‹è¯•"ã€‚è¿˜æœ‰ä»"å¤–éƒ¨"æµ‹è¯•æœ€ç»ˆåº”ç”¨ç¨‹åº,ç§°ä¸º"é»‘ç›’æµ‹è¯•"æˆ–"é›†æˆæµ‹è¯•"ã€‚è®©æˆ‘ä»¬ä»ç¬¬ä¸€ç§å¼€å§‹ã€‚</p><p>ä¸ºäº†å¼„æ¸…æ¥šæˆ‘ä»¬åº”è¯¥æµ‹è¯•ä»€ä¹ˆ,è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„ç¨‹åºåŠŸèƒ½æ˜¯ä»€ä¹ˆã€‚ä¸»è¦æ¥è¯´,grrsåº”è¯¥æ‰“å°å‡ºä¸ç»™å®šæ¨¡å¼åŒ¹é…çš„è¡Œã€‚å› æ­¤,è®©æˆ‘ä»¬ä¸ºæ­¤ç¼–å†™å•å…ƒæµ‹è¯•:æˆ‘ä»¬è¦ç¡®ä¿æˆ‘ä»¬æœ€é‡è¦çš„é€»è¾‘èƒ½æ­£å¸¸å·¥ä½œ,å¹¶ä¸”æˆ‘ä»¬è¦ä»¥ä¸€ç§ä¸ä¾èµ–äºå‘¨å›´ä»»ä½•è®¾ç½®ä»£ç (ä¾‹å¦‚å¤„ç†CLIå‚æ•°)çš„æ–¹å¼æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p>å›åˆ°æˆ‘ä»¬å¯¹grrsçš„ç¬¬ä¸€ä¸ªå®ç°,æˆ‘ä»¬åœ¨mainå‡½æ•°ä¸­æ·»åŠ äº†è¿™æ®µä»£ç :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=k>for</span><span class=w> </span><span class=n>line</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>content</span><span class=p>.</span><span class=n>lines</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=n>line</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span><span class=o>&amp;</span><span class=n>args</span><span class=p>.</span><span class=n>pattern</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=fm>println!</span><span class=p>(</span><span class=s>&#34;</span><span class=si>{}</span><span class=s>&#34;</span><span class=p>,</span><span class=w> </span><span class=n>line</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>é—æ†¾çš„æ˜¯,è¿™ä¸å¤ªå®¹æ˜“æµ‹è¯•ã€‚é¦–å…ˆ,å®ƒåœ¨mainå‡½æ•°ä¸­,æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½è½»æ˜“è°ƒç”¨å®ƒã€‚è¿™å¯ä»¥é€šè¿‡å°†è¿™æ®µä»£ç ç§»åˆ°ä¸€ä¸ªå‡½æ•°ä¸­æ¥è½»æ¾è§£å†³:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>fn</span> <span class=nf>find_matches</span><span class=p>(</span><span class=n>content</span>: <span class=kp>&amp;</span><span class=kt>str</span><span class=p>,</span><span class=w> </span><span class=n>pattern</span>: <span class=kp>&amp;</span><span class=kt>str</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=n>line</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>content</span><span class=p>.</span><span class=n>lines</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=n>line</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=fm>println!</span><span class=p>(</span><span class=s>&#34;</span><span class=si>{}</span><span class=s>&#34;</span><span class=p>,</span><span class=w> </span><span class=n>line</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨æµ‹è¯•ä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°,çœ‹çœ‹å®ƒçš„è¾“å‡ºæ˜¯ä»€ä¹ˆ:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=cp>#[test]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>fn</span> <span class=nf>find_a_match</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>find_matches</span><span class=p>(</span><span class=s>&#34;lorem ipsum</span><span class=se>\n</span><span class=s>dolor sit amet&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;lorem&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=fm>assert_eq!</span><span class=p>(</span><span class=w> </span><span class=c1>// å‘ƒå‘ƒå‘ƒ
</span></span></span></code></pre></td></tr></table></div></div><p>æˆ–è€…&mldr;æˆ‘ä»¬èƒ½å—ï¼Ÿç°åœ¨,find_matchesç›´æ¥æ‰“å°åˆ°stdout,å³ç»ˆç«¯ã€‚æˆ‘ä»¬ä¸èƒ½åœ¨æµ‹è¯•ä¸­è½»æ˜“æ•è·è¿™ä¸ª!è¿™æ˜¯åœ¨å®ç°ä¹‹åç¼–å†™æµ‹è¯•æ—¶ç»å¸¸å‡ºç°çš„é—®é¢˜:æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªä¸ä½¿ç”¨å®ƒçš„ä¸Šä¸‹æ–‡ç´§å¯†é›†æˆçš„å‡½æ•°ã€‚</p><p>æ³¨æ„:åœ¨ç¼–å†™å°å‹CLIåº”ç”¨ç¨‹åºæ—¶,è¿™å®Œå…¨æ²¡é—®é¢˜ã€‚ä¸éœ€è¦è®©ä¸€åˆ‡éƒ½å¯æµ‹è¯•!ç„¶è€Œ,æ€è€ƒä½ å¯èƒ½æƒ³è¦ä¸ºä»£ç çš„å“ªäº›éƒ¨åˆ†ç¼–å†™å•å…ƒæµ‹è¯•æ˜¯å¾ˆé‡è¦çš„ã€‚è™½ç„¶æˆ‘ä»¬å°†çœ‹åˆ°æ”¹å˜è¿™ä¸ªå‡½æ•°ä½¿å…¶å¯æµ‹è¯•å¾ˆå®¹æ˜“,ä½†æƒ…å†µå¹¶éæ€»æ˜¯å¦‚æ­¤ã€‚</p><p>å¥½çš„,æˆ‘ä»¬æ€æ ·æ‰èƒ½è®©å®ƒå¯æµ‹è¯•å‘¢?æˆ‘ä»¬éœ€è¦ä»¥æŸç§æ–¹å¼æ•è·è¾“å‡ºã€‚Rustçš„æ ‡å‡†åº“æœ‰ä¸€äº›å¤„ç†I/O(è¾“å…¥/è¾“å‡º)çš„å·§å¦™æŠ½è±¡,æˆ‘ä»¬å°†ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªå«åšstd::io::Writeçš„ã€‚è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡äº†æˆ‘ä»¬å¯ä»¥å†™å…¥çš„ä¸œè¥¿çš„trait,åŒ…æ‹¬å­—ç¬¦ä¸²ä½†ä¹ŸåŒ…æ‹¬stdoutã€‚</p><p>å¦‚æœè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡åœ¨Rustä¸Šä¸‹æ–‡ä¸­å¬åˆ°"trait"è¿™ä¸ªè¯,é‚£ä½ æœ‰ç¦äº†ã€‚Traitæ˜¯Rustæœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ã€‚ä½ å¯ä»¥æŠŠå®ƒä»¬æƒ³è±¡æˆJavaä¸­çš„æ¥å£,æˆ–è€…Haskellä¸­çš„ç±»å‹ç±»(å–å†³äºä½ æ›´ç†Ÿæ‚‰å“ªä¸ª)ã€‚å®ƒä»¬å…è®¸ä½ æŠ½è±¡å¯ä»¥ç”±ä¸åŒç±»å‹å…±äº«çš„è¡Œä¸ºã€‚ä½¿ç”¨traitçš„ä»£ç å¯ä»¥ä»¥éå¸¸é€šç”¨å’Œçµæ´»çš„æ–¹å¼è¡¨è¾¾æƒ³æ³•ã€‚è¿™ä¹Ÿæ„å‘³ç€å®ƒå¯èƒ½å˜å¾—éš¾ä»¥é˜…è¯»ã€‚ä¸è¦è®©è¿™å“åˆ°ä½ :å³ä½¿ä½¿ç”¨Rustå¤šå¹´çš„äººä¹Ÿä¸æ€»æ˜¯ç«‹å³ç†è§£æ³›å‹ä»£ç åœ¨åšä»€ä¹ˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,è€ƒè™‘å…·ä½“ç”¨é€”ä¼šæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚,åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­,æˆ‘ä»¬æŠ½è±¡çš„è¡Œä¸ºæ˜¯"å†™å…¥å®ƒ"ã€‚å®ç°(&ldquo;impl&rdquo;)å®ƒçš„ç±»å‹çš„ä¾‹å­åŒ…æ‹¬:ç»ˆç«¯çš„æ ‡å‡†è¾“å‡º,æ–‡ä»¶,å†…å­˜ä¸­çš„ç¼“å†²åŒº,æˆ–TCPç½‘ç»œè¿æ¥ã€‚(å‘ä¸‹æ»šåŠ¨std::io::Writeçš„æ–‡æ¡£ä»¥æŸ¥çœ‹"å®ç°è€…"åˆ—è¡¨ã€‚)</p><p>æœ‰äº†è¿™äº›çŸ¥è¯†,è®©æˆ‘ä»¬æ”¹å˜æˆ‘ä»¬çš„å‡½æ•°ä»¥æ¥å—ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚å®ƒåº”è¯¥æ˜¯ä»»ä½•å®ç°Writeçš„ç±»å‹ã€‚è¿™æ ·,æˆ‘ä»¬å°±å¯ä»¥åœ¨æµ‹è¯•ä¸­æä¾›ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²,å¹¶å¯¹å…¶è¿›è¡Œæ–­è¨€ã€‚è¿™æ˜¯æˆ‘ä»¬å¦‚ä½•ç¼–å†™è¿™ä¸ªç‰ˆæœ¬çš„find_matches:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>fn</span> <span class=nf>find_matches</span><span class=p>(</span><span class=n>content</span>: <span class=kp>&amp;</span><span class=kt>str</span><span class=p>,</span><span class=w> </span><span class=n>pattern</span>: <span class=kp>&amp;</span><span class=kt>str</span><span class=p>,</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>writer</span>: <span class=nc>impl</span><span class=w> </span><span class=n>std</span>::<span class=n>io</span>::<span class=n>Write</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=n>line</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>content</span><span class=p>.</span><span class=n>lines</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=n>line</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=fm>writeln!</span><span class=p>(</span><span class=n>writer</span><span class=p>,</span><span class=w> </span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>line</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æ–°å‚æ•°æ˜¯mut writer,å³ä¸€ä¸ªå¯å˜çš„æˆ‘ä»¬ç§°ä¹‹ä¸º"writer"çš„ä¸œè¥¿ã€‚å®ƒçš„ç±»å‹æ˜¯impl std::io::Write,ä½ å¯ä»¥ç†è§£ä¸º"ä»»ä½•å®ç°Write traitçš„ç±»å‹çš„å ä½ç¬¦"ã€‚è¿˜è¦æ³¨æ„æˆ‘ä»¬å¦‚ä½•ç”¨writeln!(writer, â€¦)æ›¿æ¢äº†ä¹‹å‰ä½¿ç”¨çš„println!(â€¦)ã€‚println!çš„å·¥ä½œæ–¹å¼ä¸writeln!ç›¸åŒ,ä½†æ€»æ˜¯ä½¿ç”¨æ ‡å‡†è¾“å‡ºã€‚</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æµ‹è¯•è¾“å‡º:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=cp>#[test]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>fn</span> <span class=nf>find_a_match</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Vec</span>::<span class=n>new</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>find_matches</span><span class=p>(</span><span class=s>&#34;Loren ipsum</span><span class=se>\n</span><span class=s>dolor sit amet&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;lorem&#34;</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=k>mut</span><span class=w> </span><span class=n>result</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=fm>assert_eq!</span><span class=p>(</span><span class=n>result</span><span class=p>,</span><span class=w> </span><span class=sa>b</span><span class=s>&#34;lorem ipsum</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>è¦åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä»£ç ä¸­ä½¿ç”¨è¿™ä¸ª,æˆ‘ä»¬å¿…é¡»é€šè¿‡æ·»åŠ &amp;mut std::io::stdout()ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°æ¥æ”¹å˜mainä¸­å¯¹find_matchesçš„è°ƒç”¨ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªmainå‡½æ•°çš„ä¾‹å­,å®ƒåŸºäºæˆ‘ä»¬åœ¨å‰å‡ ç« ä¸­çœ‹åˆ°çš„å†…å®¹,å¹¶ä½¿ç”¨æˆ‘ä»¬æå–çš„find_matcheså‡½æ•°:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=cl><span class=k>fn</span> <span class=nf>main</span><span class=p>()</span><span class=w> </span>-&gt; <span class=nb>Result</span><span class=o>&lt;</span><span class=p>()</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>args</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Cli</span>::<span class=n>parse</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>content</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span>::<span class=n>fs</span>::<span class=n>read_to_string</span><span class=p>(</span><span class=o>&amp;</span><span class=n>args</span><span class=p>.</span><span class=n>path</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>with_context</span><span class=p>(</span><span class=o>||</span><span class=w> </span><span class=fm>format!</span><span class=p>(</span><span class=s>&#34;could not read file `</span><span class=si>{}</span><span class=s>`&#34;</span><span class=p>,</span><span class=w> </span><span class=n>args</span><span class=p>.</span><span class=n>path</span><span class=p>.</span><span class=n>display</span><span class=p>()))</span><span class=o>?</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>find_matches</span><span class=p>(</span><span class=o>&amp;</span><span class=n>content</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>args</span><span class=p>.</span><span class=n>pattern</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=k>mut</span><span class=w> </span><span class=n>std</span>::<span class=n>io</span>::<span class=n>stdout</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nb>Ok</span><span class=p>(())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æ³¨æ„:ç”±äºstdoutæœŸæœ›å­—èŠ‚(è€Œä¸æ˜¯å­—ç¬¦ä¸²),æˆ‘ä»¬ä½¿ç”¨std::io::Writeè€Œä¸æ˜¯std::fmt::Writeã€‚å› æ­¤,æˆ‘ä»¬åœ¨æµ‹è¯•ä¸­ç»™å‡ºä¸€ä¸ªç©ºæ•°ç»„ä½œä¸º"writer"(å®ƒçš„ç±»å‹å°†è¢«æ¨æ–­ä¸ºVec<u8>),åœ¨assert_eq!ä¸­æˆ‘ä»¬ä½¿ç”¨b"foo"ã€‚(bå‰ç¼€ä½¿è¿™æˆä¸ºä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²å­—é¢é‡,æ‰€ä»¥å®ƒçš„ç±»å‹å°†æ˜¯&[u8]è€Œä¸æ˜¯&amp;str)ã€‚</p><p>æ³¨æ„:æˆ‘ä»¬ä¹Ÿå¯ä»¥è®©è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªString,ä½†é‚£ä¼šæ”¹å˜å®ƒçš„è¡Œä¸ºã€‚å®ƒä¸ä¼šç›´æ¥å†™å…¥ç»ˆç«¯,è€Œæ˜¯å°†æ‰€æœ‰å†…å®¹æ”¶é›†åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­,å¹¶åœ¨æœ€åä¸€æ¬¡æ€§è½¬å‚¨æ‰€æœ‰ç»“æœã€‚</p><p>è¯»è€…ç»ƒä¹ :writeln!è¿”å›ä¸€ä¸ªio::Result,å› ä¸ºå†™å…¥å¯èƒ½å¤±è´¥,ä¾‹å¦‚å½“ç¼“å†²åŒºå·²æ»¡ä¸”æ— æ³•æ‰©å±•æ—¶ã€‚ä¸ºfind_matchesæ·»åŠ é”™è¯¯å¤„ç†ã€‚</p><p>æˆ‘ä»¬åˆšåˆšçœ‹åˆ°äº†å¦‚ä½•ä½¿è¿™æ®µä»£ç æ˜“äºæµ‹è¯•ã€‚æˆ‘ä»¬</p><p>è¯†åˆ«äº†æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒéƒ¨åˆ†ä¹‹ä¸€,
å°†å®ƒæ”¾å…¥è‡ªå·±çš„å‡½æ•°ä¸­,
å¹¶ä½¿å®ƒæ›´åŠ çµæ´»ã€‚
å°½ç®¡ç›®æ ‡æ˜¯ä½¿å®ƒå¯æµ‹è¯•,ä½†æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„ç»“æœå®é™…ä¸Šæ˜¯ä¸€æ®µéå¸¸æƒ¯ç”¨å’Œå¯é‡ç”¨çš„Rustä»£ç ã€‚è¿™å¤ªæ£’äº†!</p><h2 id=æ€»ç»“>æ€»ç»“</h2><p>è¿™é‡Œä¼˜é›…çš„éƒ¨åˆ†åœ¨äºä¸»ä½“åŠŸèƒ½å¹¶æ²¡æœ‰å› ä¸ºæµ‹è¯•è€Œè¿›è¡Œä¸€äº›å¾ˆä¸è‡ªç„¶çš„é‡æ„ï¼Œæ¯”å¦‚æˆ‘ä¹‹å‰è§£å†³æ–¹æ¡ˆä¸­è¿”å›hello worldçš„å‡½æ•°ã€‚</p><p>è¿™é‡Œç›´æ¥ç”¨äº†ä¸€ä¸ªç±»ä¼¼äºbufferçš„è§£å†³æ–¹æ¡ˆï¼ŒæŠŠéœ€è¦æ‰“å°çš„å†…å®¹æ”¾åˆ°1ä¸ªresult writeré‡Œï¼Œå¯ä»¥ç®€å•ç†è§£æˆæ˜¯ç¼“å­˜èµ·æ¥äº†ï¼Œè€Œä¸”å¯ä»¥ç›´æ¥è¯»å‡ºæ¥ï¼Œæˆ‘ä»¬åªè¦æ–­è¨€è¯»å‡ºæ¥çš„é‚£éƒ¨åˆ†ç»“æœå°±å¥½äº†ã€‚</p><p>æ›´å€¼å¾—ç§°é“çš„æ˜¯ï¼Œè¿™é‡Œç”¨äº†traitçš„æ–¹å¼è¿›è¡Œäº†æ³›åŒ–å¤„ç†ï¼Œä½¿å¾—ä»»ä½•å®ç°äº†<code>Write trait</code>çš„ç±»å‹éƒ½å¯ä»¥ä½œä¸ºå‚æ•°ä¼ è¿›å»ï¼Œå¹¶è¿›è¡Œæµ‹è¯•ã€‚</p></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2026 ä¹™é†‡çš„åšå®¢</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=zh.ethanhan.cc/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>